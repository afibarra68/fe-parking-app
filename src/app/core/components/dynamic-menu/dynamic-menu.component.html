<ul class="menu-list" [class.collapsed]="collapsed()">
  @for (item of menuItems(); track $index) {
    <li class="menu-item" [class.has-submenu]="item.items && item.items.length > 0">
      @if (item.routerLink) {
        <a 
          [routerLink]="item.routerLink" 
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: false}"
          class="menu-link"
          [title]="collapsed() ? item.label : ''">
          @if (item.icon) {
            <i [class]="item.icon" class="menu-icon"></i>
          }
          @if (!collapsed()) {
            <span class="menu-label">{{ item.label }}</span>
          }
          @if (item.badge && !collapsed()) {
            <span [class]="item.badgeClass || 'menu-badge'">
              {{ item.badge }}
            </span>
          }
        </a>
      } @else {
        <span class="menu-link menu-parent" [title]="collapsed() ? item.label : ''">
          @if (item.icon) {
            <i [class]="item.icon" class="menu-icon"></i>
          }
          @if (!collapsed()) {
            <span class="menu-label">{{ item.label }}</span>
          }
        </span>
      }
      @if (item.items && item.items.length > 0 && !collapsed()) {
        <ul class="submenu">
          @for (subItem of item.items; track subItem.routerLink || $index) {
            <li class="submenu-item">
              <a 
                [routerLink]="subItem.routerLink" 
                routerLinkActive="active"
                class="submenu-link">
                @if (subItem.icon) {
                  <i [class]="subItem.icon" class="menu-icon"></i>
                }
                <span>{{ subItem.label }}</span>
              </a>
            </li>
          }
        </ul>
      }
    </li>
  }
</ul>

